{% extends "dashboard/base-layout.html" %}
{% load bootstrap3 i18n %}


    {% block page_title %}System Info{% endblock %}

    {% block page_content %}
        <div class="row">
            <div class="col-md-6">
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">Client</h3>
                    </div>
                    <div class="box-body">
                        {{ info.client_ip }}
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">Error</h3>
                    </div>
                    <div class="box-body">
                        trigger division by zero <a href="{% url "management:error_debug" %}" class="btn btn-danger">error</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">System</h3>
                    </div>
                    <div class="box-body no-padding">
                        <table class="table table-striped">
                            <tbody>
                                <tr>
                                    <td>Django Version</td>
                                    <td>{{ info.django_version }}</td>
                                </tr>
                                <tr>
                                    <td>GLUE Release</td>
                                    <td>{{ info.glue_release }}</td>
                                </tr>
                                {% for i in info.os_version %}
                                    <tr>
                                        <td>{{ i.0 }}</td>
                                        {% if i.2 %}
                                            <td>
                                                {% for el in i.1 %}
                                                    {{ el }}{% if not forloop.last %}{{ i.2 }}{% endif %}<br/>
                                                {% endfor %}
                                            </td>
                                        {% else %}
                                            <td>{{ i.1 }}</td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                                {% for i in info.socket %}
                                    <tr>
                                        <td>{{ i.0 }}</td>
                                        {% if i.2 %}
                                            <td>
                                                {% for el in i.1 %}
                                                    {{ el }}{% if not forloop.last %}{{ i.2 }}{% endif %}<br/>
                                                {% endfor %}
                                            </td>
                                        {% else %}
                                            <td>{{ i.1 }}</td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">Python Internals</h3>
                    </div>
                    <div class="box-body no-padding">
                        <table class="table table-striped">
                            <tbody>
                                {% for i in info.python_internals %}
                                    <tr>
                                        <td>{{ i.0 }}</td>
                                        {% if i.2 %}
                                            <td>
                                                {% for el in i.1 %}
                                                    {{ el }}{% if not forloop.last %}{{ i.2 }}{% endif %}<br/>
                                                {% endfor %}
                                            </td>
                                        {% else %}
                                            <td>{{ i.1 }}</td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">OS Internals</h3>
                    </div>
                    <div class="box-body no-padding">
                        <table class="table table-striped">
                            <tbody>
                                {% for i in info.os_internals %}
                                    <tr>
                                        <td>{{ i.0 }}</td>
                                        {% if i.2 %}
                                            <td>
                                                {% for el in i.1 %}
                                                    {{ el }}{% if not forloop.last %}{{ i.2 }}{% endif %}<br/>
                                                {% endfor %}
                                            </td>
                                        {% else %}
                                            <td>{{ i.1 }}</td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">Memory</h3>
                    </div>
                    <div class="box-body no-padding">
                        <table class="table table-striped">
                            <tbody>
                                {% for i in info.memory %}
                                    <tr>
                                        <td>{{ i.0 }}</td>
                                        {% if i.2 %}
                                            <td>
                                                {% for el in i.1 %}
                                                    {{ el }}{% if not forloop.last %}{{ i.2 }}{% endif %}<br/>
                                                {% endfor %}
                                            </td>
                                        {% else %}
                                            <td>{{ i.1 }}</td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="box box-warning">
                    <div class="box-header with-border">
                        <h3 class="box-title">Security</h3>
                    </div>
                    <div class="box-body no-padding">
                        <table class="table table-striped">
                            <tbody>
                                {% for i in info.security %}
                                    <tr>
                                        <td>{{ i.0 }}</td>
                                        {% if i.2 %}
                                            <td>
                                                {% for el in i.1 %}
                                                    {{ el }}{% if not forloop.last %}{{ i.2 }}{% endif %}<br/>
                                                {% endfor %}
                                            </td>
                                        {% else %}
                                            <td>{{ i.1 }}</td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">Disk</h3>
                    </div>
                    <div class="box-body no-padding">
                        <table class="table table-striped">
                            <tbody>
                                <tr>
                                    <th>Dev</th>
                                    <th>Total</th>
                                    <th>Used</th>
                                    <th>Free</th>
                                    <th>%</th>
                                    <th>Mount</th>
                                </tr>
                                {% for i in info.disk %}
                                    <tr>
                                        <td>{{ i.0 }}</td>
                                        <td>{{ i.1 }}</td>
                                        <td>{{ i.2 }}</td>
                                        <td>{{ i.3 }}</td>
                                        <td>{{ i.4 }}</td>
                                        <td>{{ i.5 }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">Environment</h3>
                    </div>
                    <div class="box-body no-padding">
                        <table class="table table-striped table-responsive">
                            <tbody>
                                {% for i in info.environment %}
                                    <tr>
                                        <td>{{ i.0 }}</td>
                                        {% if i.2 %}
                                            <td>
                                                {% for el in i.1 %}
                                                    {{ el }}{% if not forloop.last %}{{ i.2 }}{% endif %}<br/>
                                                {% endfor %}
                                            </td>
                                        {% else %}
                                            <td>{{ i.1 }}</td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-12">
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">Dependencies ({{ info.virtualenv_dependencies|length }} Packages)</h3>
                    </div>
                    <div class="box-body">
                        default module installation path {{ info.virtualenv_dependencies_path }}
                    </div>
                    <div class="box-footer">
                        <div class="row box-flex">
                            {% for dep in info.virtualenv_dependencies %}
                                {% if dep.dependencies|length == 0 %}
                                    <div class="col-md-2">
                                        <div class="box box-{% if dep.dependency_for|length > 0 %}info{% else %}default{% endif %}">
                                            <div class="box-header with-border">
                                                <a name="{{ dep.package_name }}" class="no-link"><h3 class="box-title text-black" {% if dep.dependency_for|length > 0 %} data-toggle="tooltip" title="Dependency for {{ dep.dependency_for|join:", " }}"{% endif %}>{{ dep.package_name }} ({{ dep.package.version }})</h3></a>
                                            </div>
                                            {% if not dep.default_location %}
                                                <div class="box-body">
                                                    {{ dep.package.location }}
                                                </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <div class="row">
                            {% for dep in info.virtualenv_dependencies %}
                                {% if dep.dependencies|length > 0 %}
                                    <div class="col-md-4">
                                        <div class="box box-{% if dep.dependency_for|length > 0 %}info{% else %}default{% endif %}">
                                            <div class="box-header with-border">
                                                <a name="{{ dep.package_name }}" class="no-link"><h3 class="box-title text-black" {% if dep.dependency_for|length > 0 %} data-toggle="tooltip" title="Dependency for {{ dep.dependency_for|join:", " }}"{% endif %}>{{ dep.package_name }} ({{ dep.package.version }})</h3></a>
                                            </div>
                                            {% if not dep.default_location %}
                                                <div class="box-body">
                                                    {{ dep.package.location }}
                                                </div>
                                            {% endif %}
                                            <div class="box-footer no-padding">
                                                <table class="table table-striped table-responsive">
                                                    <col style="width:35%">
                                                    <col style="width:20%">
                                                    <col style="width:45%">
                                                    <tbody>
                                                        <tr>
                                                            <th>Package</th>
                                                            <th>Installed</th>
                                                            <th>Required</th>
                                                        </tr>
                                                        {% for p in dep.dependencies %}
                                                        <tr>
                                                            <td><a href="#{{ p.key }}">{{ p.package_name }}</a></td>
                                                            <td>{{ p.installed_version }}</td>
                                                            <td>{{ p.required_version }}</td>
                                                        </tr>
                                                        {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor%}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endblock %}
